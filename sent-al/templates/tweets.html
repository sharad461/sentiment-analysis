{% extends 'layout.html' %}
{% block text %}
<div class ="main-content">
	<form id="kw-form">
		{{ form.hidden_tag() }}
		{{ form.keyword.label() }}
		{{ form.keyword() }}
		{{ form.submit() }}
	</form>
</div><div id="tweet-log"></div>{% endblock %}{% block javascript %}<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.slim.js"></script><script>
	var socket = io.connect('//' + document.domain + ':' + location.port);

	socket.on('new tweet', res => {
		append = '<br><span>'+ res.tweet +'</span>'
		document.querySelector("#tweet-log").innerHTML += append
	})

	socket.on('end', res => {
		socket.emit('end', {'state':1})
	})
	document.querySelector("#kw-form #submit").onclick = ()=>{document.location.href="/analyze/tweets/"+ document.querySelector("#keyword").value; return false}
</script>
{% endblock %}